function add_option(e){var t=document.getElementById(e+"_more"),o=document.getElementById(e+"_option_number").value,r=document.createElement("div"),n=document.createElement("span"),i=document.createElement("input"),a=document.createElement("label"),d=document.createElement("input"),l=document.createTextNode("Default Value"),u=document.createTextNode("Delete"),s=document.createElement("div"),c=document.createElement("a");r.setAttribute("id",e+"_div"+o),r.setAttribute("class","bp-option sortable"),n.setAttribute("class","bp-option-icon grabber"),i.setAttribute("type","text"),i.setAttribute("name",e+"_option["+o+"]"),i.setAttribute("id",e+"_option"+o),"checkbox"===e||"multiselectbox"===e?(d.setAttribute("type","checkbox"),d.setAttribute("name","isDefault_"+e+"_option["+o+"]")):(d.setAttribute("type","radio"),d.setAttribute("name","isDefault_"+e+"_option")),d.setAttribute("value",o),c.setAttribute("href",'javascript:hide("'+e+"_div"+o+'")'),c.setAttribute("class","delete"),c.appendChild(u),s.setAttribute("class","delete-button"),s.appendChild(c),a.appendChild(document.createTextNode(" ")),a.appendChild(d),a.appendChild(document.createTextNode(" ")),a.appendChild(l),a.appendChild(document.createTextNode(" ")),r.appendChild(n),r.appendChild(document.createTextNode(" ")),r.appendChild(i),r.appendChild(a),r.appendChild(s),t.appendChild(r),enableSortableFieldOptions(e),document.getElementById(e+"_option"+o).focus(),o++,document.getElementById(e+"_option_number").value=o}function show_options(e){for(var t,o=0;o<XProfileAdmin.do_settings_section_field_types.length;o++)document.getElementById(XProfileAdmin.do_settings_section_field_types[o]).style.display="none";XProfileAdmin.do_settings_section_field_types.indexOf(e)>=0?(document.getElementById(e).style.display="",t="on"):(jQuery("#do-autolink").val(""),t=""),""===XProfileAdmin.do_autolink&&jQuery("#do-autolink").val(t),jQuery(document).trigger("bp-xprofile-show-options",e)}function hide(e){if(!document.getElementById(e))return!1;document.getElementById(e).style.display="none";var t=e.replace("div","option");document.getElementById(t).value=""}function toggle_no_member_type_notice(){var e=jQuery("input.member-type-selector");if(e.length){var t=!1;e.each(function(){if(jQuery(this).is(":checked"))return t=!0,!1}),t?jQuery("p.member-type-none-notice").addClass("hide"):jQuery("p.member-type-none-notice").removeClass("hide")}}function enableSortableFieldOptions(){jQuery(".bp-options-box").sortable({cursor:"move",items:"div.sortable",tolerance:"intersect",axis:"y"}),jQuery(".sortable, .sortable span").css("cursor","move")}function destroySortableFieldOptions(){jQuery(".bp-options-box").sortable("destroy"),jQuery(".sortable, .sortable span").css("cursor","default")}function titleHint(e){e=e||"title";var t=jQuery("#"+e),o=jQuery("#"+e+"-prompt-text");""===t.val()?o.removeClass("screen-reader-text"):o.addClass("screen-reader-text"),o.click(function(){jQuery(this).addClass("screen-reader-text"),t.focus()}),t.blur(function(){""===this.value&&o.removeClass("screen-reader-text")}).focus(function(){o.addClass("screen-reader-text")}).keydown(function(e){o.addClass("screen-reader-text"),jQuery(this).unbind(e)})}var fixHelper=function(e,t){return t.children().each(function(){jQuery(this).width(jQuery(this).width())}),t};jQuery(document).ready(function(){jQuery("#bp-xprofile-add-field #title").focus(),toggle_no_member_type_notice(),jQuery("input.member-type-selector").on("change",function(){toggle_no_member_type_notice()}),jQuery("a.ajax-option-delete").on("click",function(){var e=this.id.split("-");e=e[1],jQuery.post(ajaxurl,{action:"xprofile_delete_option",cookie:encodeURIComponent(document.cookie),_wpnonce:jQuery("input#_wpnonce").val(),option_id:e},function(){})}),jQuery('[id^="sort_order_"]').change(function(){"custom"!==jQuery(this).val()?destroySortableFieldOptions():enableSortableFieldOptions(jQuery("#fieldtype :selected").val())}),jQuery("ul#field-group-tabs").show(),jQuery("ul#field-group-tabs").sortable({cursor:"move",axis:"x",opacity:1,items:"li",tolerance:"intersect",update:function(){jQuery.post(ajaxurl,{action:"xprofile_reorder_groups",cookie:encodeURIComponent(document.cookie),_wpnonce_reorder_groups:jQuery("input#_wpnonce_reorder_groups").val(),group_order:jQuery(this).sortable("serialize")},function(){})}}).disableSelection(),jQuery("fieldset.field-group").sortable({cursor:"move",opacity:.7,items:"fieldset",tolerance:"pointer",update:function(){jQuery.post(ajaxurl,{action:"xprofile_reorder_fields",cookie:encodeURIComponent(document.cookie),_wpnonce_reorder_fields:jQuery("input#_wpnonce_reorder_fields").val(),field_order:jQuery(this).sortable("serialize"),field_group_id:jQuery(this).attr("id")},function(){})}}).disableSelection(),enableSortableFieldOptions(jQuery("#fieldtype :selected").val()),titleHint("title");var e=jQuery('input[name="date_format"]'),t=jQuery("#date-format-custom-value"),o=jQuery("#date-format-custom-sample");e.click(function(e){switch(e.target.value){case"elapsed":t.val(""),o.html("");break;case"custom":break;default:t.val(e.target.value),o.html(jQuery(e.target).siblings(".date-format-label").html())}});var r=jQuery("#date-format-custom");t.focus(function(){r.prop("checked","checked")});var n=jQuery("#date-format-custom-spinner");t.change(function(e){n.addClass("is-active"),jQuery.post(ajaxurl,{action:"date_format",date:e.target.value},function(e){n.removeClass("is-active"),o.html(e)})});var i;!function(e){i=jQuery("ul:first li",e).droppable({accept:".connectedSortable fieldset",hoverClass:"ui-state-hover",activeClass:"ui-state-acceptable",touch:"pointer",tolerance:"pointer",drop:function(t,o){var r=jQuery(this),n=jQuery(r.find("a").attr("href")).find(".connectedSortable");jQuery(r).removeClass("drop-candidate"),o.draggable.hide("slow",function(){e.tabs("option","active",i.index(r)),jQuery(this).appendTo(n).show("slow").animate({opacity:"1"},500),n=jQuery(r.find("a").attr("href")).find(".connectedSortable"),jQuery(n).find("p.nofields").hide("slow"),jQuery.post(ajaxurl,{action:"xprofile_reorder_fields",cookie:encodeURIComponent(document.cookie),_wpnonce_reorder_fields:jQuery("input#_wpnonce_reorder_fields").val(),field_order:jQuery(n).sortable("serialize"),field_group_id:jQuery(n).attr("id")},function(){})})},over:function(){jQuery(this).addClass("drop-candidate")},out:function(){jQuery(this).removeClass("drop-candidate")}})}(jQuery("#tabs").tabs())});