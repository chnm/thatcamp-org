!function(c){var n,e,r=t_jp.prefix,p=1,o=0,s=[],i=[],u=0;function l(t,a){clearTimeout(e),s.push(t),i.push(a),function(t,a){if(0!==c.trim(a).length){var n=function(){var t=c(this).attr("id").substr(c(this).attr("id").lastIndexOf("_")+1),a=c("#"+r+"img_"+t);c("#"+r+t).attr("data-source",1),a.removeClass("tr-icon-yellow").removeClass("tr-icon-green").addClass("tr-icon-yellow")};t=t.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),c("*[data-orig='"+t+"'][data-hidden!='y']").html(a).each(n),c("*[data-orig='"+t+"'][data-hidden='y']").attr("data-trans",a).each(n)}}(t,a),e=setTimeout(function(){var t,a={ln0:t_jp.lang,sr0:p,action:"tp_translation",items:s.length};for(t=0;t<s.length;t+=1)a["tk"+t]=s[t],a["tr"+t]=i[t],o+=c("*[data-orig='"+s[t].replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")+"']").length;c.ajax({type:"POST",url:t_jp.ajaxurl,data:a,success:function(){console.window&&console.log(o+"/"+n+" translations posted")}}),i=[],s=[]},200)}function j(t,a){l(t,c("<div>"+c.trim(a)+"</div>").text()),window.console&&console.log(n-c("."+r+'[data-source=""]').length+"/"+n+" auto translated")}function d(t,a,n){c.ajax({url:t_jp.ajaxurl,dataType:"json",type:"GET",data:{action:"tp_tp",e:"g",tl:n,q:t},success:a})}function f(a,t,n){if(t_jp.msn_key){var e="[";c(a).each(function(t){e+='"'+encodeURIComponent(a[t].replace(/[\\"]/g,"\\$&").replace(/(\r\n|\n|\r)/gm," "))+'",'}),e=e.slice(0,-1)+"]",c.ajax({url:"//api.microsofttranslator.com/V2/Ajax.svc/TranslateArray?appId="+t_jp.msn_key+"&to="+n+"&texts="+e,dataType:"jsonp",jsonp:"oncomplete",success:t})}else 1===u?setTimeout(function(){f(a,t,n)},500):(u=1,c.getScript("//www.microsofttranslator.com/ajax/v2/toolkit.ashx?loc=en&toolbar=none",function(){t_jp.msn_key=_mstConfig.appId,f(a,t,n)}))}function _(t,a,n){c.ajax({url:t_jp.ajaxurl,dataType:"json",type:"GET",data:{action:"tp_tp",e:"y",tl:n,q:t},success:a})}function g(t,a,n){c.ajax({url:t_jp.ajaxurl,dataType:"json",type:"GET",data:{action:"tp_tp",e:"u",tl:n,q:t},success:a})}function h(t,a,n){c.ajax({url:"http://api.apertium.org/json/translate",data:{q:t,langpair:t_jp.olang+"|"+n,markUnknown:"no"},dataType:"jsonp",traditional:!0,success:a})}function m(r,i){t_jp.preferred.some(function(t){if(t_jp.engines[t])return"a"===t&&(s=r,p=3,h(i,function(t){200<=t.responseStatus&&t.responseStatus<300&&(void 0!==t.responseData.translatedText?j(s[0],t.responseData.translatedText):c(t.responseData).each(function(t){200===this.responseStatus&&j(s[t],this.responseData.translatedText)}))},t_jp.lang)),"b"===t&&(o=r,p=2,f(i,function(t){c(t).each(function(t){j(o[t],this.TranslatedText)})},t_jp.blang)),"g"===t&&(e=r,d(i,function(t){c(t.results).each(function(t){j(e[t],this)})},t_jp.lang)),"y"===t&&(n=r,p=4,_(i,function(t){c(t.results).each(function(t){j(n[t],this)})},t_jp.lang)),"u"===t&&(a=r,p=5,g(i,function(t){c(t.results).each(function(t){j(a[t],this)})},t_jp.lang)),!0;var a,n,e,o,s})}function t(){var n=[],e=0,o=[],s=[];c("."+r+'[data-source=""]').each(function(){var t=c(this).attr("data-orig"),a=c(this).attr("data-orig");void 0===a&&(a=c(this).html()),1!==n[a]&&(n[a]=1,1024<e+encodeURIComponent(a).length&&(m(s,o),e=0,o=[],s=[]),e+=encodeURIComponent(a).length,s.push(t),o.push(a))}),m(s,o)}function y(t){"function"==typeof c.xLazyLoader?t():(t_jp.$=c).getScript(t_jp.plugin_url+"/js/lazy.js",t).done(t)}t_jp.dgpt=d,t_jp.dbt=f,t_jp.dyt=_,t_jp.dut=g,t_jp.dat=h,t_jp.at=t,t_jp.tfl=y,t_jp.tfju=function t(a){t.hit?a():(t.hit=!0,y(function(){c.fn.propAttr=c.fn.prop||c.fn.attr,c.xLazyLoader({js:t_jp.jQueryUI+"jquery-ui.min.js",css:t_jp.jQueryUI+"themes/"+t_jp.theme+"/jquery-ui.css",success:a})}))},c(function(){void 0===t_jp.blang&&(t_jp.blang=t_jp.lang),c("."+r+"setdeflang").click(function(){return c.ajax({url:t_jp.ajaxurl,data:{action:"tp_cookie"},cache:!1}),c("."+r+"setdeflang").hide("slow"),!1}),n=c("."+r+'[data-source=""]').length,c.ajaxSetup({cache:!0}),!n||t_jp.noauto||c.isEmptyObject(t_jp.engines)||t(),t_jp.edit&&c.getScript(t_jp.plugin_url+"/js/transposhedit.js")})}(jQuery);
//# sourceMappingURL=transposh.js.map